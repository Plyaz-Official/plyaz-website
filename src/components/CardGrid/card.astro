---
import CtaButton from '../CtaButton.astro';
import handWrittenLogo from './handwritten-logo.png';

export type Label = {
  value: string;
  position: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';
}

export interface Props {
  type: "main" | "child" | "signature";
  topTitle?: string;
  bottomTitle?: string;
  className?: string;
  description?: string;
  extended?: boolean;
  ctaLabel?: string;
  showSignature?: boolean;
  label?: Label;
  pathname?: string;
  newWindow?: boolean;
}

const {
  type,
  topTitle,
  bottomTitle,
  className,
  description,
  extended,
  ctaLabel,
  showSignature,
  label,
  pathname,
  newWindow,
} = Astro.props;

const isMainDefault = type === 'main' && !extended;
const isMainExtended = type === 'main' && extended;
const isChild = type === 'child' && !extended;
const isChildExtended = type === 'child' && extended;
const isSignature = type === 'signature';
---

<div class={`relative w-full h-full ${className || ''}`}>
  { isMainDefault && (
    <>
      <h2 class="pt-5 pl-10">
        <span class="font-semibold text-6xl tracking-[-0.1rem] pr-2">{topTitle}</span>
        <span class="font-secondary font-semibold italic tracking-[-0.14rem] text-6xl">{bottomTitle}</span>
      </h2>
    </>
  )}

  { isMainExtended && (
  <div class="flex flex-col justify-between h-full p-10">
    <div>
      <h2 class="pb-4">
        <span class="font-semibold text-6xl tracking-[-0.1rem] pr-2 block">{topTitle}</span>
        <span class="font-secondary font-semibold italic tracking-[-0.14rem] text-6xl capitalize">{bottomTitle}</span>
      </h2>
      <p class="pb-6.5rem">{description}</p>
    </div>
    <CtaButton 
      className="self-end" 
      type="primary"  
      label={ctaLabel || ''} 
      pathname={pathname || ''}
      newWindow={true || false}
    />
  </div>
  )}

  { isChild && (
    <div class="flex flex-col">
      <p class="text-4xl font-medium text-secondary-foreground pt-8 pl-10">{topTitle}</p>
      <p class="absolute bottom-4 right-0 font-secondary italic text-[12.65rem] tracking-[-0.74rem] text-accent-foreground/20 leading-[0.92] pb-5 pr-6">{bottomTitle}</p>
    </div>
  )}

  { isChildExtended && (
    <div class="flex flex-col">
      <p class="text-4xl font-medium text-secondary-foreground pt-8 pl-10 pr-8">{topTitle}</p>
      <p class="absolute bottom-4 right-0 font-secondary italic text-[12.65rem] tracking-[-0.74rem] text-accent-foreground/20 leading-[0.92] pb-5 pr-6">{bottomTitle}</p>
    </div>
  )}

  <!-- original card system with 2 titles & description
  { isChildExtended && (
    <div class="p-10">
      <span class="text-xs font-semibold uppercase text-secondary-foreground/70 pb-2">{topTitle}</span>
      <h3 class="text-2xl font-semibold pb-4">{bottomTitle}</h3>
      <p class="text-lg">{description}</p>
    </div>
  )}   -->

  { isSignature && (
    <div data-name="signature" class="relative w-full h-full">
      {
        showSignature && (
          <img class="p-24" src={handWrittenLogo.src} alt="hand written logo" class="h-auto">
        )
      }

      {
        !showSignature && label?.position === 'top-left' && (
          <span class="absolute top-2 left-4 font-primary text-xs uppercase text-accent-foreground">{label?.value}</span>
        )
      }

      {
        !showSignature && label?.position === 'top-right' && (
          <span class="absolute top-2 right-4 font-primary text-xs uppercase text-accent-foreground">{label?.value}</span>
        )
      }

      {
        !showSignature && label?.position === 'bottom-left' && (
          <span class="absolute bottom-[14px] left-[24px] -rotate-90 origin-bottom-left font-primary text-xs uppercase text-accent-foreground">{label?.value}</span>
        )
      }

      {
        !showSignature && label?.position === 'bottom-right' && (
          <span class="absolute bottom-2 right-4 font-primary text-xs uppercase text-accent-foreground">{label?.value}</span>
        )
      }
    </div>
  )}

  <div data-name="pseudo-dots-box" class="absolute top-0 left-0 w-full h-full">
    <div class="dot absolute top-[-.3rem] left-[-.3rem]"></div>
    <div class="dot absolute top-[-.3rem] right-[-.3rem]"></div>
    <div class="dot absolute bottom-[-.3rem] left-[-.3rem]"></div>
    <div class="dot absolute bottom-[-.3rem] right-[-.3rem]"></div>
  </div>

  <div data-name="pseudo-border-box" class="absolute top-0 left-0 w-[calc(100%+1px)] h-[calc(100%+1px)] z-[-1]">
    <div class="absolute w-full h-full vertical-psuedo-border">
    </div>
    <div class="absolute w-full h-full horizontal-psuedo-border">
    </div>
  </div>
</div>